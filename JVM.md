# Понимание работы JVM.

```java

public class JvmComprehension {

    public static void main(String[] args) {
        int i = 1;                      // 1
        Object o = new Object();        // 2
        Integer ii = 2;                 // 3
        printAll(o, i, ii);             // 4
        System.out.println("finished"); // 7
    }

    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5
        System.out.println(o.toString() + i + ii);  // 6
    }
}

```

## В первую очередь подгружаeтся класс JvmComprehension в область пямяти Metaspase.
## Затем начинается выполняться код построчно в методе main (точка входа). Сюда же загружаются данные о классе, методы, поля и др.
## В момент вызова метода main создаётся фрейм(кадр) в стэке.
### 1. Примитивные данные также помещаются в стэк (инициализируется переменная i).
### 2. Выделяется место в пямяти heap(куча) c помощью оператора new под объект Object(вызывается конструктор). Затем оператор присваивания "=" присвоит зачение в переменную "o". А в стэк записывается ссылка "о" класса Object.
### 3. Здесь также переменная ii записывается в стэк.
### 4. Создаётся новый фрейм(кадр) в стеке, В метод printAll в качестве параметров создаётся новая ссылка "o"(которая ссылается на тот же объект в куче Object). Ссылка "о" помещается в этот созданный фрейм стэка. Копируется переменная i и переменная ii в этот же фрейм printAll стэка.
### 5. Создаётся в стэке в фрейме printAll переменная uselessVar и инициализируется.
### 6 При вызове метода println создаётся новый фрейм в стэке, создается в нём новая ссылка "o", которая так же ссылаеться на тот же Object в heap(куче). Далее у "o" вызывается метод toString(выделяеться место в куче ,создается строка) , далее к этой строке прибавляются значения переменных i и ii(которые так же скопированны и записаны в этот фрейм стека.) Далее все выводиться в консоль. После мы возвращеемся в фрэйм стека main(выходим из метода println и  printAll) Стэк println и printAll стирается. Сборщик мусора анализирует обьекты и удаляет не используемые из памяти.
### 7. Создается новый фрэйм стэка println, туда записывается строка "finished" и выводится в консоль. Затем мы выходим из фрейма метода println, выходим из фрэйма метода main. Стэк очищается. Выполнение программы завершено.